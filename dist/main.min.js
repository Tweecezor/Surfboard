"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return a};var a={},e=Object.prototype,l=e.hasOwnProperty,s=Object.defineProperty||function(e,t,n){e[t]=n.value},t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.asyncIterator||"@@asyncIterator",o=t.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var o,i,a,c,t=t&&t.prototype instanceof f?t:f,t=Object.create(t.prototype),r=new _(r||[]);return s(t,"_invoke",{value:(o=e,i=n,a=r,c="suspendedStart",function(e,t){if("executing"===c)throw new Error("Generator is already running");if("completed"===c){if("throw"===e)throw t;return S()}for(a.method=e,a.arg=t;;){var n=a.delegate;if(n){n=function e(t,n){var r=n.method,o=t.iterator[r];if(void 0===o)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=void 0,e(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;r=u(o,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,d;o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}(n,a);if(n){if(n===d)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if("suspendedStart"===c)throw c="completed",a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);c="executing";n=u(o,i,a);if("normal"===n.type){if(c=a.done?"completed":"suspendedYield",n.arg===d)continue;return{value:n.arg,done:a.done}}"throw"===n.type&&(c="completed",a.method="throw",a.arg=n.arg)}})}),t}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}a.wrap=c;var d={};function f(){}function m(){}function h(){}var t={},p=(i(t,r,function(){return this}),Object.getPrototypeOf),p=p&&p(p(L([]))),y=(p&&p!==e&&l.call(p,r)&&(t=p),h.prototype=f.prototype=Object.create(t));function v(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function g(a,c){var t;s(this,"_invoke",{value:function(n,r){function e(){return new c(function(e,t){!function t(e,n,r,o){var i,e=u(a[e],a,n);if("throw"!==e.type)return(n=(i=e.arg).value)&&"object"==_typeof(n)&&l.call(n,"__await")?c.resolve(n.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):c.resolve(n).then(function(e){i.value=e,r(i)},function(e){return t("throw",e,r,o)});o(e.arg)}(n,r,e,t)})}return t=t?t.then(e,e):e()}})}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function b(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function L(t){if(t){var n,e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return n=-1,(e=function e(){for(;++n<t.length;)if(l.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e}).next=e}return{next:S}}function S(){return{value:void 0,done:!0}}return s(y,"constructor",{value:m.prototype=h,configurable:!0}),s(h,"constructor",{value:m,configurable:!0}),m.displayName=i(h,o,"GeneratorFunction"),a.isGeneratorFunction=function(e){e="function"==typeof e&&e.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,i(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e},a.awrap=function(e){return{__await:e}},v(g.prototype),i(g.prototype,n,function(){return this}),a.AsyncIterator=g,a.async=function(e,t,n,r,o){void 0===o&&(o=Promise);var i=new g(c(e,t,n,r),o);return a.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},v(y),i(y,o,"Generator"),i(y,r,function(){return this}),i(y,"toString",function(){return"[object Generator]"}),a.keys=function(e){var t,n=Object(e),r=[];for(t in n)r.push(t);return r.reverse(),function e(){for(;r.length;){var t=r.pop();if(t in n)return e.value=t,e.done=!1,e}return e.done=!0,e}},a.values=L,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(b),!e)for(var t in this)"t"===t.charAt(0)&&l.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function e(e,t){return i.type="throw",i.arg=n,r.next=e,t&&(r.method="next",r.arg=void 0),!!t}for(var t=this.tryEntries.length-1;0<=t;--t){var o=this.tryEntries[t],i=o.completion;if("root"===o.tryLoc)return e("end");if(o.tryLoc<=this.prev){var a=l.call(o,"catchLoc"),c=l.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return e(o.catchLoc,!0);if(this.prev<o.finallyLoc)return e(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return e(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return e(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&l.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}var i=(o=o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc?null:o)?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),b(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n,r,o=this.tryEntries[t];if(o.tryLoc===e)return"throw"===(n=o.completion).type&&(r=n.arg,b(o)),r}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:L(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},a}function asyncGeneratorStep(e,t,n,r,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function _asyncToGenerator(c){return function(){var e=this,a=arguments;return new Promise(function(t,n){var r=c.apply(e,a);function o(e){asyncGeneratorStep(r,t,n,o,i,"next",e)}function i(e){asyncGeneratorStep(r,t,n,o,i,"throw",e)}o(void 0)})}}var burger=document.querySelector(".burger"),overlay=document.querySelector(".overlay"),close=document.querySelector(".overlay__close"),menuItems=document.querySelectorAll(".overlay-menu__link"),body=document.querySelector("body"),addOverlay=function(){overlay.classList.add("overlay--active"),body.classList.add("disable-scroll")},removeOverlay=function(){overlay.classList.remove("overlay--active"),body.classList.remove("disable-scroll")};function init(){var e=new ymaps.Map("map",{center:[59.93848,30.31248],zoom:12},{searchControlProvider:"yandex#search"}),t=new ymaps.Placemark([59.93848,30.31248],{hintContent:"Магазин бургеров №1",balloonContent:"BurgerShop#1"},{iconLayout:"default#image",iconImageHref:"images/icons/map-marker.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]}),n=new ymaps.Placemark([59.9,30.36],{hintContent:"Магазин бургеров №2",balloonContent:"BurgerShop#2"},{iconLayout:"default#image",iconImageHref:"images/icons/map-marker.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]}),r=new ymaps.Placemark([59.96,30.32],{hintContent:"Магазин бургеров №3",balloonContent:"BurgerShop#3"},{iconLayout:"default#image",iconImageHref:"images/icons/map-marker.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]}),o=new ymaps.Placemark([59.94,30.27],{hintContent:"Магазин бургеров №3",balloonContent:"BurgerShop#3"},{iconLayout:"default#image",iconImageHref:"images/icons/map-marker.svg",iconImageSize:[30,42],iconImageOffset:[-5,-38]});e.behaviors.disable("scrollZoom"),e.geoObjects.add(t).add(n).add(r).add(o)}burger.addEventListener("click",function(e){e.preventDefault(),addOverlay()}),close.addEventListener("click",function(e){e.preventDefault(),removeOverlay()}),menuItems.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),removeOverlay()})}),ymaps.ready(init);var form=document.querySelector(".delivery__form"),formSection=document.querySelector(".delivery"),url="https://webdev-api.loftschool.com/sendmail",modal=document.querySelector(".modal"),closeModalBtn=document.querySelector(".modal__btn"),modalContent=document.querySelector(".modal__content"),bodyTag=document.querySelector("body"),closeModal=function(){modal.classList.remove("modal--active"),bodyTag.classList.remove("disable-scroll")},openModal=function(){modalContent.innerHTML=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Письмо отправилось",modal.classList.add("modal--active"),bodyTag.classList.add("disable-scroll")},sections=(form.addEventListener("submit",function(){var t=_asyncToGenerator(_regeneratorRuntime().mark(function e(t){var n,r,o;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r={name:form.elements.name.value,phone:form.elements.phone.value,comment:form.elements.comment.value,to:"test@ya.ru"},n="",e.prev=3,e.next=6,fetch(url,{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(r)});case 6:return r=e.sent,e.next=9,r.json();case 9:o=e.sent,o=o.message,n=o,e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),o="Ошибка! Письмо не отправилось. Повторите попытку",console.log(o),n=o;case 19:return e.prev=19,openModal(n),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[3,14,19,22]])}));return function(e){return t.apply(this,arguments)}}()),closeModalBtn.addEventListener("click",function(e){closeModal()}),modal.addEventListener("click",function(e){var t=document.querySelector(".modal__window");e.composedPath().includes(t)||closeModal()}),document.querySelectorAll("section")),display=document.querySelector(".mainContent"),fixedMenu=document.querySelector(".fixed-menu"),fixedMenuItems=document.querySelectorAll(".fixed-menu__item"),canScroll=(sections[0].classList.add("section--active"),!0);function changeSideMenuTheme(e){"black"===sections[e].getAttribute("data-sidemenu-theme")?fixedMenu.classList.add("fixed-menu--shadow"):fixedMenu.classList.remove("fixed-menu--shadow"),fixedMenuItems.forEach(function(e){return e.classList.remove("fixed-menu__item--active")}),fixedMenuItems[e].classList.add("fixed-menu__item--active")}var player,changeSection=function(e){var t=-100*e;sections.forEach(function(e){e.classList.remove("section--active")}),sections[e].classList.add("section--active"),changeSideMenuTheme(e),display.style.transform="translateY(".concat(t,"%)")},scroller=function(){for(var e=0,t=0;t<sections.length;t++)if(sections[t].classList.contains("section--active")){e=t;break}var n=e+1,r=e-1;return{next:function(){n<sections.length&&changeSection(n)},prev:function(){0<=r&&changeSection(r)}}},detect=(window.addEventListener("wheel",function(e){var t,n;canScroll&&(canScroll=!1,e=e.deltaY,t=(n=scroller()).next,n=n.prev,0<e&&t(),e<0&&n(),setTimeout(function(){canScroll=!0},1300))}),window.addEventListener("keydown",function(e){var t=e.target.tagName.toLowerCase();if("input"!==t&&"textarea"!==t){var t=scroller(),n=t.next,r=t.prev;switch(e.keyCode){case 38:r();break;case 40:n()}}}),new MobileDetect(window.navigator.userAgent)),isMobileVersion=detect.mobile(),menuList=(console.log(isMobileVersion),window.addEventListener("touchmove",function(e){e.preventDefault()}),isMobileVersion&&$("body").swipe({swipe:function(e,t){var n=scroller(),r=n.prev,n=n.next;"up"===t&&n(),"down"===t&&r()}}),document.querySelectorAll("[data-scroll-to]")),formatTime=(menuList.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault();var n=e.target.getAttribute("data-scroll-to"),r=99;sections.forEach(function(e,t){e.getAttribute("data-section-id")===n&&(r=t)}),99!==r&&changeSection(r)})}),function(e){var e=Math.round(e),t=Math.floor(e/60),e=e-60*t,e=e<10?"0".concat(e):e;return"".concat(t,":").concat(e)}),onPlayerReady=function(){var n=player.getDuration();$(".player__duration-estimate").text(formatTime(n)),setInterval(function(){var e=player.getCurrentTime(),t=e/n*100;$(".player__playback-button").css({left:"".concat(t,"%")}),$(".player__duration-completed").text(formatTime(e))},1e3)},eventsInit=function(){$(".player__start").on("click",function(e){e.preventDefault(),$(e.currentTarget).hasClass("paused")?player.pauseVideo():player.playVideo()}),$(".player__playback").on("click",function(e){var t=$(e.currentTarget),e=(e.pageX-t.offset().left)/t.width()*100,t=player.getDuration()/100*e;$(".player__playback-button").css({left:"".concat(e,"%")}),player.seekTo(t)}),$(".player__splash").on("click",function(e){player.playVideo()})},onPlayerStateChange=function(e){var t=$(".player__start");switch(e.data){case 1:$(".player__wrapper").addClass("active"),t.addClass("paused");break;case 2:t.removeClass("paused")}};function onYouTubeIframeAPIReady(){player=new YT.Player("yt-player",{height:"405",width:"660",videoId:"7AkbUfZjS5k",events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange},playerVars:{controls:0,disablekb:0,showinfo:0,rel:0,autoplay:0,modestbranding:0}})}eventsInit();var products=document.querySelectorAll(".product"),productsContent=document.querySelectorAll(".product__content"),closeAll=function(){productsContent.forEach(function(e){e.classList.remove("product__content--active"),e.style.width=0})},calcWidth=function(){var e=0,t=document.documentElement.clientWidth,n=document.querySelectorAll(".product__link"),r=parseInt(getComputedStyle(n[0]).width),n=n.length*r,r=document.querySelectorAll(".product__text"),r=getComputedStyle(r[0]),o=parseInt(r["padding-left"]);parseInt(r["padding-left"]);return{itemWidth:e=window.matchMedia("(max-width: 768px)").matches?t-n:500,contentWidth:e-o}},open=function(e){e.classList.add("product__content--active");var t=calcWidth(),n=t.itemWidth,t=t.contentWidth;e.firstElementChild.style.width="".concat(t,"px"),e.style.width="".concat(n,"px")},closeSlide=function(e){e.classList.remove("product__content--active"),e.style.width=0},reviews=(products.forEach(function(e,t){e.addEventListener("click",function(){(productsContent[t].classList.contains("product__content--active")?closeSlide:(closeAll(),open))(productsContent[t])})}),document.querySelectorAll(".review")),previews=document.querySelectorAll(".author"),removeActiveStatus=function(){previews.forEach(function(e,t){e.classList.remove("author--active"),reviews[t].classList.remove("review__active")})},slides=(previews.forEach(function(e,t){e.addEventListener("click",function(){removeActiveStatus(),e.classList.add("author--active"),reviews[t].classList.add("review__active")})}),document.querySelectorAll(".slide")),slider=document.querySelector(".slider__list"),leftBtn=document.querySelector(".slider__arrow--left"),rightBtn=document.querySelector(".slider__arrow--right"),leftBorder=0,slidesWidth=parseInt(getComputedStyle(slides[0]).width),rightBorder=slidesWidth*(slides.length-1),teamTitles=(leftBtn.addEventListener("click",function(e){var t=parseInt(getComputedStyle(slider).right);leftBorder<t&&(slider.style.right="".concat(t-slidesWidth,"px"))}),rightBtn.addEventListener("click",function(e){var t=parseInt(getComputedStyle(slider).right);t<rightBorder&&(slider.style.right="".concat(t+slidesWidth,"px"))}),document.querySelectorAll(".member__title")),members=document.querySelectorAll(".member"),membersAccordions=document.querySelectorAll(".member__accordion"),membersLength=members.length,closeAccordion=function(e){e.style.height="0px",teamTitles.forEach(function(e){e.classList.remove("member__title--active")})},openAccordion=function(e){var t=e.firstElementChild.clientHeight;e.style.height="".concat(t,"px")},closeAllAccordion=(window.addEventListener("click",function(e){closeAllAccordion(e.target)}),function(e){e.classList.contains("member__title")||(teamTitles.forEach(function(e){e.classList.remove("member__title--active")}),membersAccordions.forEach(function(e){closeAccordion(e)}))});members.forEach(function(e,n){teamTitles[n].addEventListener("click",function(e){var e=e.target,t=membersAccordions[n];e.classList.contains("member__title--active")?closeAccordion(t):(membersAccordions.forEach(function(e){closeAccordion(e)}),openAccordion(t),e.classList.add("member__title--active"))})});